(()=>{"use strict";var e,n={283:(e,n,l)=>{const s=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.element,i=window.wp.components,t=window.wp.apiFetch;var a=l.n(t);const c=window.ReactJSXRuntime;function u({attributes:e,setAttributes:n}){const{courseId:l,courseName:s,lessonId:t,lessonTitle:u,lessonUrl:d}=e,p=(0,o.useBlockProps)({className:"jurible-lien-lecon"}),[b,m]=(0,r.useState)([]),[f,h]=(0,r.useState)([]),[j,x]=(0,r.useState)(!0),[g,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x(!0),a()({path:"/fluent-community/v2/courses?per_page=100"}).then(e=>{e.courses&&e.courses.data&&m(e.courses.data),x(!1)}).catch(e=>{console.error("Erreur chargement cours:",e),x(!1)})},[]),(0,r.useEffect)(()=>{l>0?(v(!0),a()({path:`/fluent-community/v2/admin/courses/${l}/lessons`}).then(e=>{e.data?h(e.data):Array.isArray(e)?h(e):e.lessons&&h(e.lessons),v(!1)}).catch(e=>{console.error("Erreur chargement leÃ§ons:",e),v(!1)})):h([])},[l]);const y=[{label:"-- SÃ©lectionner un cours --",value:0},...b.map(e=>({label:e.title,value:e.id}))],w=[{label:"-- SÃ©lectionner une leÃ§on --",value:0},...f.map(e=>({label:e.title,value:e.id}))];return t?(0,c.jsx)("div",{...p,children:(0,c.jsxs)("div",{className:"jurible-lien-lecon-card",children:[(0,c.jsxs)("div",{className:"jurible-lien-lecon-header",children:[(0,c.jsx)("span",{className:"jurible-lien-lecon-icon",children:"ðŸ”—"}),(0,c.jsx)("span",{className:"jurible-lien-lecon-label",children:"EN SAVOIR PLUS"})]}),(0,c.jsxs)("p",{className:"jurible-lien-lecon-description",children:["Consultez Ã©galement : Â« ",u," Â»"]}),(0,c.jsx)("button",{className:"jurible-lien-lecon-btn",onClick:()=>n({lessonId:0,lessonTitle:"",lessonUrl:""}),children:"Changer de leÃ§on"})]})}):(0,c.jsx)("div",{...p,children:(0,c.jsx)(i.Placeholder,{icon:"welcome-learn-more",label:"Lien vers une leÃ§on",instructions:"SÃ©lectionnez un cours puis une leÃ§on.",children:j?(0,c.jsx)(i.Spinner,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.SelectControl,{label:"Cours",value:l,options:y,onChange:e=>{const l=parseInt(e),s=b.find(e=>e.id===l);n({courseId:l,courseName:s?s.title:"",lessonId:0,lessonTitle:"",lessonUrl:""})}}),l>0&&(g?(0,c.jsx)(i.Spinner,{}):(0,c.jsx)(i.SelectControl,{label:"LeÃ§on",value:t,options:w,onChange:e=>{const s=parseInt(e),o=f.find(e=>e.id===s);if(o){const e=b.find(e=>e.id===l),r=e?e.slug:"",i=o.slug||"",t=`/${window.fluentCommunityPortalSlug||"accueil"}/course/${r}/lessons/${i}/view`;n({lessonId:s,lessonTitle:o.title,lessonUrl:t})}}}))]})})})}function d({attributes:e}){const{lessonTitle:n,lessonUrl:l}=e,s=o.useBlockProps.save({className:"jurible-lien-lecon"});return l?(0,c.jsx)("div",{...s,children:(0,c.jsxs)("div",{className:"jurible-lien-lecon-card",children:[(0,c.jsxs)("div",{className:"jurible-lien-lecon-header",children:[(0,c.jsx)("span",{className:"jurible-lien-lecon-icon",children:"ðŸ”—"}),(0,c.jsx)("span",{className:"jurible-lien-lecon-label",children:"EN SAVOIR PLUS"})]}),(0,c.jsxs)("p",{className:"jurible-lien-lecon-description",children:["Consultez Ã©galement : Â« ",n," Â»"]}),(0,c.jsx)("a",{href:l,className:"jurible-lien-lecon-btn",target:"_blank",rel:"noopener noreferrer",children:"Voir le cours â†’"})]})}):null}const p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/lien-lecon","version":"1.0.0","title":"Lien LeÃ§on","category":"text","icon":"welcome-learn-more","description":"Affiche un lien vers une leÃ§on Fluent Community.","keywords":["lien","lecon","cours","fluent"],"attributes":{"courseId":{"type":"integer","default":0},"courseName":{"type":"string","default":""},"lessonId":{"type":"integer","default":0},"lessonTitle":{"type":"string","default":""},"lessonUrl":{"type":"string","default":""}},"supports":{"html":false},"textdomain":"jurible-blocks-react","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),b="\n.jurible-lien-lecon {\n    margin: 24px 0;\n}\n.jurible-lien-lecon-card {\n    display: block;\n    text-decoration: none;\n    background: linear-gradient(135deg, #B0001D 0%, #7C3AED 100%);\n    border-radius: 16px;\n    padding: 24px;\n    color: white;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.jurible-lien-lecon-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 24px rgba(176, 0, 29, 0.3);\n}\n.jurible-lien-lecon-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 12px;\n}\n.jurible-lien-lecon-icon {\n    font-size: 16px;\n}\n.jurible-lien-lecon-label {\n    font-family: 'Poppins', sans-serif;\n    font-weight: 700;\n    font-size: 12px;\n    letter-spacing: 0.5px;\n    text-transform: uppercase;\n    color: rgba(255, 255, 255, 0.9);\n}\n.jurible-lien-lecon-description {\n    font-size: 18px;\n    line-height: 1.5;\n    margin: 0 0 16px 0;\n    color: white;\n}\n.jurible-lien-lecon-btn {\n    display: inline-block;\n    background: white;\n    color: #B0001D;\n    padding: 10px 20px;\n    border-radius: 8px;\n    font-family: 'Poppins', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    text-decoration: none;\n    transition: background 0.2s ease;\n}\n.jurible-lien-lecon-btn:hover {\n    background: rgba(255, 255, 255, 0.9);\n}\n.jurible-lien-lecon-info {\n    background: rgba(255, 255, 255, 0.1);\n    padding: 12px;\n    border-radius: 8px;\n    margin: 12px 0;\n    font-size: 14px;\n}\n";function m(){if(!document.getElementById("jurible-lien-lecon-styles")){const e=document.createElement("style");e.id="jurible-lien-lecon-styles",e.textContent=b,document.head.appendChild(e)}document.querySelectorAll('iframe[name="editor-canvas"]').forEach(e=>{try{const n=e.contentDocument||e.contentWindow.document;if(n&&!n.getElementById("jurible-lien-lecon-styles")){const e=n.createElement("style");e.id="jurible-lien-lecon-styles",e.textContent=b,n.head.appendChild(e)}}catch(e){console.log("Cannot access iframe:",e)}})}!function e(){"undefined"!=typeof wp&&wp.blocks&&wp.blocks.registerBlockType?(m(),setTimeout(m,1e3),setTimeout(m,3e3),(0,s.registerBlockType)(p.name,{...p,edit:u,save:d}),console.log("JURIBLE LIEN LECON REGISTERED!")):setTimeout(e,50)}()}},l={};function s(e){var o=l[e];if(void 0!==o)return o.exports;var r=l[e]={exports:{}};return n[e](r,r.exports,s),r.exports}s.m=n,e=[],s.O=(n,l,o,r)=>{if(!l){var i=1/0;for(u=0;u<e.length;u++){for(var[l,o,r]=e[u],t=!0,a=0;a<l.length;a++)(!1&r||i>=r)&&Object.keys(s.O).every(e=>s.O[e](l[a]))?l.splice(a--,1):(t=!1,r<i&&(i=r));if(t){e.splice(u--,1);var c=o();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,o,r]},s.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return s.d(n,{a:n}),n},s.d=(e,n)=>{for(var l in n)s.o(n,l)&&!s.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={658:0,694:0};s.O.j=n=>0===e[n];var n=(n,l)=>{var o,r,[i,t,a]=l,c=0;if(i.some(n=>0!==e[n])){for(o in t)s.o(t,o)&&(s.m[o]=t[o]);if(a)var u=a(s)}for(n&&n(l);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},l=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];l.forEach(n.bind(null,0)),l.push=n.bind(null,l.push.bind(l))})();var o=s.O(void 0,[694],()=>s(283));o=s.O(o)})();