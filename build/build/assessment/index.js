(()=>{"use strict";var e,s={732:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,n=window.wp.element,t=window.ReactJSXRuntime;function i({attributes:e,setAttributes:i}){const{assessmentId:o,assessmentTitle:a}=e,r=(0,s.useBlockProps)(),[l,d]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{fetch("/wp-json/jurible/v1/assessments").then(e=>e.json()).then(e=>{e.success&&e.data&&d(e.data),m(!1)}).catch(e=>{console.error("Erreur chargement assessments:",e),m(!1)})},[]),c?(0,t.jsx)("div",{...r,children:(0,t.jsx)("div",{className:"assessment-editor-placeholder",children:"Chargement des assessments..."})}):(0,t.jsx)("div",{...r,children:(0,t.jsxs)("div",{className:"assessment-editor",children:[(0,t.jsxs)("div",{className:"assessment-editor-header",children:[(0,t.jsx)("span",{className:"assessment-icon",children:"ðŸ“"}),(0,t.jsx)("span",{className:"assessment-title",children:"Assessment Jurible"})]}),(0,t.jsxs)("div",{className:"assessment-editor-content",children:[(0,t.jsxs)("div",{className:"assessment-field",children:[(0,t.jsx)("label",{children:"SÃ©lectionner un assessment"}),(0,t.jsxs)("select",{value:o||"",onChange:e=>{const s=parseInt(e.target.value)||0,n=l.find(e=>e.id===s);i({assessmentId:s,assessmentTitle:n?n.title:"",courseId:n?n.course_id:0,lessonId:n?n.lesson_id:0})},children:[(0,t.jsx)("option",{value:"",children:"-- Choisir un assessment --"}),l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),o>0&&(0,t.jsxs)("div",{className:"assessment-info",children:[(0,t.jsxs)("strong",{children:["âœ… ",a]}),(0,t.jsx)("p",{children:"Ce bloc affichera le formulaire de soumission et la note de l'Ã©tudiant."})]}),0===l.length&&(0,t.jsx)("div",{className:"assessment-warning",children:"âš ï¸ Aucun assessment trouvÃ©. CrÃ©ez-en un dans le menu Assessments."})]})]})})}function o({attributes:e}){const{assessmentId:n,assessmentTitle:i,courseId:o,lessonId:a}=e,r=s.useBlockProps.save();return n?(0,t.jsx)("div",{...r,children:(0,t.jsx)("div",{className:"jurible-assessment-container","data-assessment-id":n,"data-assessment-title":i,"data-course-id":o,"data-lesson-id":a,children:(0,t.jsx)("div",{className:"assessment-loading",children:"Chargement..."})})}):null}const a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/assessment","version":"1.0.0","title":"Assessment Jurible","category":"text","icon":"clipboard","description":"Bloc de soumission et affichage des notes pour les assessments","example":{},"supports":{"html":false},"attributes":{"assessmentId":{"type":"number","default":0},"assessmentTitle":{"type":"string","default":""},"courseId":{"type":"number","default":0},"lessonId":{"type":"number","default":0}},"textdomain":"jurible-blocks-react","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),r="\n.assessment-editor {\n    background: #FFFFFF;\n    border: 1px solid #E5E7EB;\n    border-radius: 12px;\n    padding: 20px;\n    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.05);\n}\n.assessment-editor-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #F3F4F6;\n}\n.assessment-icon {\n    font-size: 24px;\n}\n.assessment-title {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1A1A1A;\n    margin: 0;\n}\n.assessment-editor-content {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n.assessment-field {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n.assessment-field label {\n    font-size: 13px;\n    font-weight: 600;\n    color: #4A4A4A;\n}\n.assessment-field select {\n    padding: 10px 12px;\n    border: 1px solid #E5E7EB;\n    border-radius: 8px;\n    font-size: 14px;\n    background: #FFFFFF;\n    cursor: pointer;\n    transition: border-color 0.2s;\n}\n.assessment-field select:focus {\n    outline: none;\n    border-color: #7C3AED;\n    box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.1);\n}\n.assessment-info {\n    background: linear-gradient(94.73deg, rgba(176, 0, 29, 0.08) 0%, rgba(124, 58, 237, 0.08) 100%);\n    color: #7C3AED;\n    padding: 15px;\n    border-radius: 8px;\n    font-size: 14px;\n    border: 1px solid rgba(124, 58, 237, 0.2);\n}\n.assessment-info strong {\n    display: block;\n    margin-bottom: 5px;\n}\n.assessment-info p {\n    margin: 0;\n    font-size: 12px;\n    color: #6B7280;\n}\n.assessment-warning {\n    background: #FEF3C7;\n    color: #B45309;\n    padding: 12px 15px;\n    border-radius: 8px;\n    font-size: 13px;\n}\n.assessment-editor-placeholder {\n    text-align: center;\n    padding: 40px 20px;\n    color: #6B7280;\n    font-size: 14px;\n}\n";function l(){if(!document.getElementById("jurible-assessment-editor-styles")){const e=document.createElement("style");e.id="jurible-assessment-editor-styles",e.textContent=r,document.head.appendChild(e)}document.querySelectorAll('iframe[name="editor-canvas"]').forEach(e=>{try{const s=e.contentDocument||e.contentWindow.document;if(s&&!s.getElementById("jurible-assessment-editor-styles")){const e=s.createElement("style");e.id="jurible-assessment-editor-styles",e.textContent=r,s.head.appendChild(e)}}catch(e){console.log("Cannot access iframe:",e)}})}!function s(){"undefined"!=typeof wp&&wp.blocks&&wp.blocks.registerBlockType?(l(),setTimeout(l,1e3),setTimeout(l,3e3),(0,e.registerBlockType)(a.name,{...a,edit:i,save:o}),console.log("JURIBLE ASSESSMENT BLOCK REGISTERED!")):setTimeout(s,50)}()}},n={};function t(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return s[e](o,o.exports,t),o.exports}t.m=s,e=[],t.O=(s,n,i,o)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(t.O).every(e=>t.O[e](n[l]))?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(c--,1);var d=i();void 0!==d&&(s=d)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={316:0,100:0};t.O.j=s=>0===e[s];var s=(s,n)=>{var i,o,[a,r,l]=n,d=0;if(a.some(s=>0!==e[s])){for(i in r)t.o(r,i)&&(t.m[i]=r[i]);if(l)var c=l(t)}for(s&&s(n);d<a.length;d++)o=a[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},n=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))})();var i=t.O(void 0,[100],()=>t(732));i=t.O(i)})();