(()=>{"use strict";var e,s={366:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,r=window.wp.data,i=window.wp.element,t=window.ReactJSXRuntime,a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/sommaire","version":"1.0.0","title":"Sommaire","category":"text","icon":"list-view","description":"GÃ©nÃ¨re automatiquement un sommaire Ã  partir des titres H2.","keywords":["sommaire","table","contents","toc"],"attributes":{"headings":{"type":"array","default":[]}},"supports":{"html":false},"textdomain":"jurible-blocks-react","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,e.registerBlockType)(a.name,{...a,edit:function({attributes:e,setAttributes:a}){const{headings:n}=e,l=(0,s.useBlockProps)({className:"jurible-sommaire"}),o=(0,r.useSelect)(e=>e(s.store).getBlocks(),[]);return(0,i.useEffect)(()=>{if(!o||0===o.length)return;const e=[],s=r=>{r.forEach(r=>{if("core/heading"===r.name&&2===r.attributes?.level){const s="string"==typeof r.attributes.content?r.attributes.content:r.attributes.content?.text||"";if(s.length>0){const r=s.replace(/<[^>]*>/g,""),i=r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");e.push({content:r,slug:i})}}r.innerBlocks&&r.innerBlocks.length>0&&s(r.innerBlocks)})};s(o),JSON.stringify(e)!==JSON.stringify(n)&&a({headings:e})},[o]),(0,t.jsxs)("div",{...l,children:[(0,t.jsxs)("div",{className:"jurible-sommaire-header",children:[(0,t.jsx)("span",{className:"jurible-sommaire-icon",children:"ðŸ“‘"}),(0,t.jsx)("span",{className:"jurible-sommaire-title",children:"Sommaire"})]}),n.length>0?(0,t.jsx)("ul",{className:"jurible-sommaire-list",children:n.map((e,s)=>(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:`#${e.slug}`,children:e.content})},s))}):(0,t.jsx)("p",{className:"jurible-sommaire-info",children:"Le sommaire sera gÃ©nÃ©rÃ© automatiquement Ã  partir des titres H2."})]})},save:function({attributes:e}){const{headings:r}=e,i=s.useBlockProps.save({className:"jurible-sommaire"});return 0===r.length?null:(0,t.jsxs)("div",{...i,children:[(0,t.jsxs)("div",{className:"jurible-sommaire-header",children:[(0,t.jsx)("span",{className:"jurible-sommaire-icon",children:"ðŸ“‘"}),(0,t.jsx)("span",{className:"jurible-sommaire-title",children:"Sommaire"})]}),(0,t.jsx)("ul",{className:"jurible-sommaire-list",children:r.map((e,s)=>(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:`#${e.slug}`,children:e.content})},s))})]})}})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return s[e](a,a.exports,i),a.exports}i.m=s,e=[],i.O=(s,r,t,a)=>{if(!r){var n=1/0;for(m=0;m<e.length;m++){for(var[r,t,a]=e[m],l=!0,o=0;o<r.length;o++)(!1&a||n>=a)&&Object.keys(i.O).every(e=>i.O[e](r[o]))?r.splice(o--,1):(l=!1,a<n&&(n=a));if(l){e.splice(m--,1);var c=t();void 0!==c&&(s=c)}}return s}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[r,t,a]},i.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={183:0,247:0};i.O.j=s=>0===e[s];var s=(s,r)=>{var t,a,[n,l,o]=r,c=0;if(n.some(s=>0!==e[s])){for(t in l)i.o(l,t)&&(i.m[t]=l[t]);if(o)var m=o(i)}for(s&&s(r);c<n.length;c++)a=n[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(m)},r=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))})();var t=i.O(void 0,[247],()=>i(366));t=i.O(t)})();