(()=>{"use strict";var s,e={732:()=>{const s=window.wp.blocks,e=window.wp.blockEditor,t=window.wp.element,n=window.ReactJSXRuntime,a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/assessment","version":"1.0.0","title":"Assessment Jurible","category":"text","icon":"clipboard","description":"Bloc de soumission et affichage des notes pour les assessments","example":{},"supports":{"html":false},"attributes":{"assessmentId":{"type":"number","default":0},"assessmentTitle":{"type":"string","default":""},"courseId":{"type":"number","default":0},"lessonId":{"type":"number","default":0}},"textdomain":"jurible-blocks-react","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}');(0,s.registerBlockType)(a.name,{...a,edit:function({attributes:s,setAttributes:a}){const{assessmentId:i,assessmentTitle:r}=s,l=(0,e.useBlockProps)(),[o,d]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{fetch("/wp-json/jurible/v1/assessments").then(s=>s.json()).then(s=>{s.success&&s.data&&d(s.data),u(!1)}).catch(s=>{console.error("Erreur chargement assessments:",s),u(!1)})},[]),c?(0,n.jsx)("div",{...l,children:(0,n.jsx)("div",{className:"assessment-editor-placeholder",children:"Chargement des assessments..."})}):(0,n.jsx)("div",{...l,children:(0,n.jsxs)("div",{className:"assessment-editor",children:[(0,n.jsxs)("div",{className:"assessment-editor-header",children:[(0,n.jsx)("span",{className:"assessment-icon",children:"ðŸ“"}),(0,n.jsx)("span",{className:"assessment-title",children:"Assessment Jurible"})]}),(0,n.jsxs)("div",{className:"assessment-editor-content",children:[(0,n.jsxs)("div",{className:"assessment-field",children:[(0,n.jsx)("label",{children:"SÃ©lectionner un assessment"}),(0,n.jsxs)("select",{value:i||"",onChange:s=>{const e=parseInt(s.target.value)||0,t=o.find(s=>s.id===e);a({assessmentId:e,assessmentTitle:t?t.title:"",courseId:t?t.course_id:0,lessonId:t?t.lesson_id:0})},children:[(0,n.jsx)("option",{value:"",children:"-- Choisir un assessment --"}),o.map(s=>(0,n.jsx)("option",{value:s.id,children:s.title},s.id))]})]}),i>0&&(0,n.jsxs)("div",{className:"assessment-info",children:[(0,n.jsxs)("strong",{children:["âœ… ",r]}),(0,n.jsx)("p",{children:"Ce bloc affichera le formulaire de soumission et la note de l'Ã©tudiant."})]}),0===o.length&&(0,n.jsx)("div",{className:"assessment-warning",children:"âš ï¸ Aucun assessment trouvÃ©. CrÃ©ez-en un dans le menu Assessments."})]})]})})},save:function({attributes:s}){const{assessmentId:t,assessmentTitle:a,courseId:i,lessonId:r}=s,l=e.useBlockProps.save();return t?(0,n.jsx)("div",{...l,children:(0,n.jsx)("div",{className:"jurible-assessment-container","data-assessment-id":t,"data-assessment-title":a,"data-course-id":i,"data-lesson-id":r,children:(0,n.jsx)("div",{className:"assessment-loading",children:"Chargement..."})})}):null}})}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.m=e,s=[],n.O=(e,t,a,i)=>{if(!t){var r=1/0;for(c=0;c<s.length;c++){for(var[t,a,i]=s[c],l=!0,o=0;o<t.length;o++)(!1&i||r>=i)&&Object.keys(n.O).every(s=>n.O[s](t[o]))?t.splice(o--,1):(l=!1,i<r&&(r=i));if(l){s.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=s.length;c>0&&s[c-1][2]>i;c--)s[c]=s[c-1];s[c]=[t,a,i]},n.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e),(()=>{var s={316:0,100:0};n.O.j=e=>0===s[e];var e=(e,t)=>{var a,i,[r,l,o]=t,d=0;if(r.some(e=>0!==s[e])){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(o)var c=o(n)}for(e&&e(t);d<r.length;d++)i=r[d],n.o(s,i)&&s[i]&&s[i][0](),s[i]=0;return n.O(c)},t=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var a=n.O(void 0,[100],()=>n(732));a=n.O(a)})();