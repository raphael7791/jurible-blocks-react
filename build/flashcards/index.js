(()=>{"use strict";var e,s={149:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,n=window.wp.element,t=window.ReactJSXRuntime;function r({attributes:e,setAttributes:r}){const{courseId:l,lessonId:o,courseTitle:a,lessonTitle:i}=e,c=(0,s.useBlockProps)(),[d,h]=(0,n.useState)([]),[u,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(!0),[m,b]=(0,n.useState)(0);return(0,n.useEffect)(()=>{fetch("/wp-json/fluent-community/v2/courses").then(e=>e.json()).then(e=>{let s=[];e.courses&&e.courses.data?s=e.courses.data:e.data&&(s=e.data),h(s),x(!1)}).catch(e=>{console.error("Erreur chargement cours:",e),x(!1)})},[]),(0,n.useEffect)(()=>{l?fetch(`/wp-json/fluent-community/v2/courses/${l}`).then(e=>e.json()).then(e=>{const s=e.sections||[];let n=[];s.forEach(e=>{(e.lessons||[]).forEach(s=>{n.push({...s,sectionTitle:e.title})})}),f(n)}).catch(e=>console.error("Erreur chargement leÃ§ons:",e)):f([])},[l]),(0,n.useEffect)(()=>{o?fetch(`/wp-json/jurible/v1/flashcards?lesson_id=${o}`).then(e=>e.json()).then(e=>{b(e.total||0)}).catch(e=>console.error("Erreur chargement flashcards:",e)):b(0)},[o]),p?(0,t.jsx)("div",{...c,children:(0,t.jsx)("div",{className:"flashcards-editor-placeholder",children:"Chargement..."})}):(0,t.jsx)("div",{...c,children:(0,t.jsxs)("div",{className:"flashcards-editor",children:[(0,t.jsxs)("div",{className:"flashcards-editor-header",children:[(0,t.jsx)("span",{className:"flashcards-icon",children:"ðŸŽ´"}),(0,t.jsx)("span",{className:"flashcards-title",children:"Flashcards Jurible"})]}),(0,t.jsxs)("div",{className:"flashcards-editor-content",children:[(0,t.jsxs)("div",{className:"flashcards-field",children:[(0,t.jsx)("label",{children:"Cours"}),(0,t.jsxs)("select",{value:l||"",onChange:e=>{const s=parseInt(e.target.value)||0,n=d.find(e=>e.id===s);r({courseId:s,courseTitle:n?n.title:"",lessonId:0,lessonTitle:""})},children:[(0,t.jsx)("option",{value:"",children:"-- SÃ©lectionner un cours --"}),d.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),l>0&&(0,t.jsxs)("div",{className:"flashcards-field",children:[(0,t.jsx)("label",{children:"LeÃ§on"}),(0,t.jsxs)("select",{value:o||"",onChange:e=>{const s=parseInt(e.target.value)||0,n=u.find(e=>e.id===s);r({lessonId:s,lessonTitle:n?n.title:""})},children:[(0,t.jsx)("option",{value:"",children:"-- SÃ©lectionner une leÃ§on --"}),u.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.sectionTitle," â†’ ",e.title]},e.id))]})]}),o>0&&(0,t.jsxs)("div",{className:"flashcards-info",children:[(0,t.jsx)("strong",{children:m})," flashcard",m>1?"s":""," disponible",m>1?"s":""]})]})]})})}function l({attributes:e}){const{courseId:n,lessonId:r,courseTitle:l,lessonTitle:o}=e,a=s.useBlockProps.save();return r?(0,t.jsx)("div",{...a,children:(0,t.jsx)("div",{className:"jurible-flashcards-container","data-course-id":n,"data-lesson-id":r,"data-course-title":l,"data-lesson-title":o,children:(0,t.jsx)("div",{className:"flashcards-loading",children:"Chargement des flashcards..."})})}):null}const o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/flashcards","version":"1.0.0","title":"Flashcards Jurible","category":"text","icon":"welcome-learn-more","description":"Affiche les flashcards d\'une leÃ§on pour rÃ©viser","example":{},"supports":{"html":false},"attributes":{"courseId":{"type":"number","default":0},"lessonId":{"type":"number","default":0},"courseTitle":{"type":"string","default":""},"lessonTitle":{"type":"string","default":""}},"textdomain":"jurible-blocks-react","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),a="\n.flashcards-editor {\n    background: #FFFFFF;\n    border: 1px solid #E5E7EB;\n    border-radius: 12px;\n    padding: 20px;\n    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.05);\n}\n.flashcards-editor-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #F3F4F6;\n}\n.flashcards-icon {\n    font-size: 24px;\n}\n.flashcards-title {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1A1A1A;\n    margin: 0;\n}\n.flashcards-editor-content {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n.flashcards-field {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n}\n.flashcards-field label {\n    font-size: 13px;\n    font-weight: 600;\n    color: #4A4A4A;\n}\n.flashcards-field select {\n    padding: 10px 12px;\n    border: 1px solid #E5E7EB;\n    border-radius: 8px;\n    font-size: 14px;\n    background: #FFFFFF;\n    cursor: pointer;\n    transition: border-color 0.2s;\n}\n.flashcards-field select:focus {\n    outline: none;\n    border-color: #7C3AED;\n    box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.1);\n}\n.flashcards-info {\n    background: linear-gradient(94.73deg, rgba(176, 0, 29, 0.08) 0%, rgba(124, 58, 237, 0.08) 100%);\n    color: #7C3AED;\n    padding: 12px 16px;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 500;\n    text-align: center;\n    border: 1px solid rgba(124, 58, 237, 0.2);\n}\n.flashcards-info strong {\n    font-size: 18px;\n    font-weight: 700;\n}\n.flashcards-editor-placeholder {\n    text-align: center;\n    padding: 40px 20px;\n    color: #6B7280;\n    font-size: 14px;\n}\n";function i(){if(!document.getElementById("jurible-flashcards-editor-styles")){const e=document.createElement("style");e.id="jurible-flashcards-editor-styles",e.textContent=a,document.head.appendChild(e)}document.querySelectorAll('iframe[name="editor-canvas"]').forEach(e=>{try{const s=e.contentDocument||e.contentWindow.document;if(s&&!s.getElementById("jurible-flashcards-editor-styles")){const e=s.createElement("style");e.id="jurible-flashcards-editor-styles",e.textContent=a,s.head.appendChild(e)}}catch(e){console.log("Cannot access iframe:",e)}})}!function s(){"undefined"!=typeof wp&&wp.blocks&&wp.blocks.registerBlockType?(i(),setTimeout(i,1e3),setTimeout(i,3e3),(0,e.registerBlockType)(o.name,{...o,edit:r,save:l}),console.log("JURIBLE FLASHCARDS REGISTERED!")):setTimeout(s,50)}()}},n={};function t(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return s[e](l,l.exports,t),l.exports}t.m=s,e=[],t.O=(s,n,r,l)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,r,l]=e[d],a=!0,i=0;i<n.length;i++)(!1&l||o>=l)&&Object.keys(t.O).every(e=>t.O[e](n[i]))?n.splice(i--,1):(a=!1,l<o&&(o=l));if(a){e.splice(d--,1);var c=r();void 0!==c&&(s=c)}}return s}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,r,l]},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={577:0,877:0};t.O.j=s=>0===e[s];var s=(s,n)=>{var r,l,[o,a,i]=n,c=0;if(o.some(s=>0!==e[s])){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(i)var d=i(t)}for(s&&s(n);c<o.length;c++)l=o[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},n=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))})();var r=t.O(void 0,[877],()=>t(149));r=t.O(r)})();