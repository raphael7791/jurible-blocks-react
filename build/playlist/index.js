(()=>{"use strict";var e,n={528:()=>{const e=window.wp.blocks,n=window.wp.blockEditor,i=window.wp.element,l=window.ReactJSXRuntime;function o({attributes:e,setAttributes:o}){const{collectionId:t,collectionName:r,videoCount:s}=e,a=(0,n.useBlockProps)(),[c,d]=(0,i.useState)(!1),[p,u]=(0,i.useState)([]),[b,m]=(0,i.useState)(null);(0,i.useEffect)(()=>{f()},[]);const f=async()=>{d(!0),m(null);try{const e=await fetch("/wp-json/jurible/v1/bunny/collections?filter=Fiches");if(!e.ok)throw new Error("Erreur lors du chargement des collections");const n=await e.json();if(!n.success||!n.collections)throw new Error("Format de rÃ©ponse invalide");u(n.collections)}catch(e){console.error("Error fetching collections:",e),m(e.message)}finally{d(!1)}};return(0,l.jsx)("div",{...a,children:(0,l.jsxs)("div",{className:"jurible-playlist-editor",children:[(0,l.jsxs)("div",{className:"jurible-playlist-editor__header",children:[(0,l.jsx)("span",{className:"jurible-playlist-editor__icon",children:"ðŸŽ¬"}),(0,l.jsx)("h3",{className:"jurible-playlist-editor__title",children:"Playlist VidÃ©o Jurible"})]}),(0,l.jsxs)("div",{className:"jurible-playlist-editor__field",children:[(0,l.jsx)("label",{className:"jurible-playlist-editor__label",children:"SÃ©lectionner une collection de fiches"}),c?(0,l.jsxs)("div",{className:"jurible-playlist-editor__loading",children:[(0,l.jsx)("span",{className:"jurible-playlist-editor__spinner"}),"Chargement des collections..."]}):b?(0,l.jsx)("div",{className:"jurible-playlist-editor__info",style:{color:"#B0001D"},children:b}):(0,l.jsxs)("select",{className:"jurible-playlist-editor__select",value:t,onChange:e=>{const n=e.target.value;if(!n)return void o({collectionId:"",collectionName:"",videoCount:0});const i=p.find(e=>e.id===n);i&&o({collectionId:i.id,collectionName:i.name,videoCount:i.videoCount||0})},children:[(0,l.jsx)("option",{value:"",children:"-- Choisir une collection --"}),p.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (",e.videoCount," vidÃ©o",e.videoCount>1?"s":"",")"]},e.id))]})]}),t&&(0,l.jsxs)("div",{className:"jurible-playlist-editor__info",children:[(0,l.jsx)("strong",{children:r}),(0,l.jsx)("br",{}),s," vidÃ©o",s>1?"s":""," dans cette collection"]})]})})}function t({attributes:e}){const{collectionId:i,collectionName:o,videoCount:t}=e,r=n.useBlockProps.save();return i?(0,l.jsx)("div",{...r,children:(0,l.jsx)("div",{className:"jurible-playlist-container","data-collection-id":i,"data-collection-name":o,"data-video-count":t,children:(0,l.jsx)("div",{className:"jurible-playlist-loading",children:"Chargement de la playlist..."})})}):null}const r=JSON.parse('{"UU":"jurible/playlist"}'),s="\n.jurible-playlist-editor {\n    background: #fff;\n    border: 1px solid #E5E7EB;\n    border-radius: 8px;\n    padding: 20px;\n    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.jurible-playlist-editor__header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n    border-bottom: 1px solid #E5E7EB;\n}\n\n.jurible-playlist-editor__icon {\n    font-size: 24px;\n}\n\n.jurible-playlist-editor__title {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1A1A1A;\n    margin: 0;\n}\n\n.jurible-playlist-editor__field {\n    margin-bottom: 16px;\n}\n\n.jurible-playlist-editor__label {\n    display: block;\n    font-size: 13px;\n    font-weight: 500;\n    color: #4A4A4A;\n    margin-bottom: 6px;\n}\n\n.jurible-playlist-editor__select {\n    width: 100%;\n    padding: 10px 12px;\n    font-size: 14px;\n    border: 1px solid #D1D5DB;\n    border-radius: 6px;\n    background: #fff;\n    color: #1A1A1A;\n    cursor: pointer;\n}\n\n.jurible-playlist-editor__select:focus {\n    outline: none;\n    border-color: #B0001D;\n    box-shadow: 0 0 0 2px rgba(176, 0, 29, 0.1);\n}\n\n.jurible-playlist-editor__info {\n    background: linear-gradient(135deg, #F9FAFB 0%, #F3F4F6 100%);\n    border: 1px solid #E5E7EB;\n    border-radius: 6px;\n    padding: 12px 16px;\n    font-size: 13px;\n    color: #4A4A4A;\n}\n\n.jurible-playlist-editor__info strong {\n    color: #B0001D;\n}\n\n.jurible-playlist-editor__loading {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    color: #9CA3AF;\n    font-size: 13px;\n}\n\n.jurible-playlist-editor__spinner {\n    width: 16px;\n    height: 16px;\n    border: 2px solid #E5E7EB;\n    border-top-color: #B0001D;\n    border-radius: 50%;\n    animation: jurible-spin 0.8s linear infinite;\n}\n\n@keyframes jurible-spin {\n    to { transform: rotate(360deg); }\n}\n";function a(){const e="jurible-playlist-editor-styles";if(!document.getElementById(e)){const n=document.createElement("style");n.id=e,n.textContent=s,document.head.appendChild(n)}try{document.querySelectorAll('iframe[name="editor-canvas"]').forEach(n=>{const i=n.contentDocument||n.contentWindow?.document;if(i&&!i.getElementById(e)){const n=i.createElement("style");n.id=e,n.textContent=s,i.head.appendChild(n)}})}catch(e){}}!function n(){"undefined"!=typeof wp&&wp.blocks?(a(),setTimeout(a,1e3),setTimeout(a,3e3),(0,e.registerBlockType)(r.UU,{edit:o,save:t}),console.log("Jurible Playlist block registered")):setTimeout(n,100)}()}},i={};function l(e){var o=i[e];if(void 0!==o)return o.exports;var t=i[e]={exports:{}};return n[e](t,t.exports,l),t.exports}l.m=n,e=[],l.O=(n,i,o,t)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){for(var[i,o,t]=e[d],s=!0,a=0;a<i.length;a++)(!1&t||r>=t)&&Object.keys(l.O).every(e=>l.O[e](i[a]))?i.splice(a--,1):(s=!1,t<r&&(r=t));if(s){e.splice(d--,1);var c=o();void 0!==c&&(n=c)}}return n}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[i,o,t]},l.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={584:0,360:0};l.O.j=n=>0===e[n];var n=(n,i)=>{var o,t,[r,s,a]=i,c=0;if(r.some(n=>0!==e[n])){for(o in s)l.o(s,o)&&(l.m[o]=s[o]);if(a)var d=a(l)}for(n&&n(i);c<r.length;c++)t=r[c],l.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return l.O(d)},i=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))})();var o=l.O(void 0,[360],()=>l(528));o=l.O(o)})();